<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-item {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { background: #d4edda; }
        .error { background: #f8d7da; }
        h2 { color: #333; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üîç Media Files Diagnostic Test</h1>
    
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        // Test paths
        const testPaths = [
            'Media/animation.gif',
            'Media/mid_rising_10.wav',
            'Media/level_standard.wav',
            './Media/animation.gif',
            './Media/mid_rising_10.wav'
        ];
        
        results.innerHTML += '<h2>Current Page Location:</h2>';
        results.innerHTML += `<pre>URL: ${window.location.href}
Pathname: ${window.location.pathname}
Base: ${document.baseURI}</pre>`;
        
        results.innerHTML += '<h2>Testing Media Paths:</h2>';
        
        // Test each path
        testPaths.forEach((path, index) => {
            const testDiv = document.createElement('div');
            testDiv.className = 'test-item';
            testDiv.innerHTML = `<strong>Test ${index + 1}:</strong> ${path}<br><span id="result-${index}">Testing...</span>`;
            results.appendChild(testDiv);
            
            // Test with fetch
            fetch(path)
                .then(response => {
                    const resultSpan = document.getElementById(`result-${index}`);
                    if (response.ok) {
                        resultSpan.innerHTML = `‚úÖ SUCCESS (${response.status})<br>Full URL: ${response.url}`;
                        testDiv.className += ' success';
                    } else {
                        resultSpan.innerHTML = `‚ùå FAILED (${response.status})<br>Full URL: ${response.url}`;
                        testDiv.className += ' error';
                    }
                })
                .catch(error => {
                    const resultSpan = document.getElementById(`result-${index}`);
                    resultSpan.innerHTML = `‚ùå ERROR: ${error.message}`;
                    testDiv.className += ' error';
                });
        });
        
        // Test audio element
        results.innerHTML += '<h2>Testing Audio Element:</h2>';
        const audioTest = document.createElement('div');
        audioTest.className = 'test-item';
        audioTest.innerHTML = `
            <strong>Audio Element Test:</strong><br>
            <audio id="testAudio" controls style="width: 100%; margin: 10px 0;">
                <source src="Media/mid_rising_10.wav" type="audio/wav">
            </audio>
            <div id="audioResult">Loading...</div>
        `;
        results.appendChild(audioTest);
        
        setTimeout(() => {
            const audio = document.getElementById('testAudio');
            const audioResult = document.getElementById('audioResult');
            
            audio.addEventListener('canplay', () => {
                audioResult.innerHTML = '‚úÖ Audio loaded successfully!';
                audioTest.className += ' success';
            });
            
            audio.addEventListener('error', (e) => {
                audioResult.innerHTML = `‚ùå Audio failed to load<br>Error: ${audio.error ? audio.error.message : 'Unknown'}`;
                audioTest.className += ' error';
            });
        }, 100);
    </script>
</body>
</html>

